# 网络问题解决方案

## 🚫 问题描述

运行程序时出现以下错误：
```
ProxyError('Unable to connect to proxy', RemoteDisconnected('Remote end closed connection without response'))
```

## 🔍 问题原因

1. **代理服务器问题**：系统配置了代理，但代理服务器不可达
2. **网络防火墙**：企业或学校网络限制了对外部API的访问
3. **DNS解析问题**：无法正确解析东方财富网站域名

## ✅ 解决方案

### 方案1：使用安全演示程序（推荐）

```bash
# 运行网络安全版本，只使用稳定功能
python demo_safe.py
```

### 方案2：检查和修改代理设置

#### Windows系统：
```bash
# 检查当前代理设置
echo %HTTP_PROXY%
echo %HTTPS_PROXY%

# 临时取消代理（当前会话有效）
set HTTP_PROXY=
set HTTPS_PROXY=

# 然后运行程序
python main.py
```

#### 或者在Python代码中设置：
```python
import os
os.environ['HTTP_PROXY'] = ''
os.environ['HTTPS_PROXY'] = ''
```

### 方案3：修改程序配置

在 `config.py` 中添加网络配置：

```python
# 网络配置
NETWORK_CONFIG = {
    'SKIP_REALTIME': True,  # 跳过实时数据获取
    'REQUEST_TIMEOUT': 30,   # 增加超时时间
    'MAX_RETRIES': 1        # 减少重试次数，快速失败
}
```

### 方案4：使用替代功能

**已可用的功能：**
- ✅ 股票基本信息获取
- ✅ 历史数据获取  
- ✅ 批量数据处理
- ✅ CSV数据导出

**暂不可用：**
- ❌ 实时价格数据

## 🛠️ 实际使用建议

### 1. 仅使用历史数据进行分析

```bash
# 获取历史数据（稳定可用）
python main.py --mode historical --codes 000001 002594 --save
```

### 2. 批量获取多股票数据

```bash  
# 批量获取，跳过实时价格
python main.py --mode historical --save
```

### 3. 使用编程接口

```python
from data_fetcher import StockDataFetcher

fetcher = StockDataFetcher()

# 只使用可靠的功能
codes = ["000001", "002594", "600519"]
for code in codes:
    # 获取基本信息（稳定）
    info = fetcher.get_stock_info(code)
    
    # 获取历史数据（稳定）
    hist_data = fetcher.get_historical_data(code)
    
    # 跳过实时数据获取
```

## 📊 功能状态总结

| 功能 | 状态 | 说明 |
|-----|------|-----|
| 股票基本信息 | ✅ 可用 | 公司信息、市值等 |
| 历史价格数据 | ✅ 可用 | K线数据，支持批量获取 |
| 实时价格数据 | ❌ 受限 | 受网络代理影响 |
| 数据存储导出 | ✅ 可用 | CSV格式保存 |
| 批量处理 | ✅ 可用 | 多股票同时处理 |

## 💡 后续数据处理

即使实时数据不可用，您仍然可以：

1. **历史数据分析**：技术指标计算、趋势分析
2. **股票筛选**：基于基本面数据筛选
3. **量化研究**：回测策略、风险评估  
4. **数据可视化**：价格走势图、对比分析
5. **报告生成**：基于历史数据的分析报告

## 🔧 临时解决方案

运行以下命令快速测试：

```bash
# 1. 运行安全版演示
python demo_safe.py

# 2. 直接获取历史数据
python main.py --mode historical --codes 000001

# 3. 测试网络连接
python network_test.py
```

这样可以绕过网络问题，正常使用大部分功能进行数据分析工作。
